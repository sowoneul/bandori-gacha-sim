(this["webpackJsonpbandori-gacha-sim"]=this["webpackJsonpbandori-gacha-sim"]||[]).push([[0],[,,,,,,,,,function(t,e,a){t.exports=a.p+"static/media/whale.17edc0ad.gif"},function(t,e,a){t.exports=a.p+"static/media/tsugunomoney.a698363a.gif"},function(t,e,a){t.exports=a.p+"static/media/tsugumoney.0eee08a4.gif"},,,function(t,e,a){t.exports=a(22)},,,,,function(t,e,a){},,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(4),c=a.n(s),l=(a(19),a(5)),o=a(1),i=a.n(o),u=a(2),h=a(6),m=a(7),d=a(12),f=a(8),g=a(13),v=a(9),p=a.n(v),b=a(10),E=a.n(b),S=a(11),N=a.n(S);a(21);function w(){return(w=Object(u.a)(i.a.mark((function t(e){var a,n,r,s,c,l,o,u,h,m,d,f,g,v=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.length>1&&void 0!==v[1]&&v[1],n=v.length>2?v[2]:void 0,r=v.length>3&&void 0!==v[3]?v[3]:"en",s="https://api.bandori.ga/v1/"+r+"/",c="https://res.bandori.ga/assets-"+r+"/thumb/chara/card",t.next=7,fetch(s+"gacha/"+n.toString());case 7:return l=t.sent,t.next=10,l.json();case 10:return o=t.sent,u=o.details.filter((function(t){return a?t.rarityIndex===e&&!0===t.pickup:t.rarityIndex===e&&!1===t.pickup})),h=Math.floor(Math.random()*u.length),m=u[h],t.next=16,fetch(s+"card/"+m.situationId);case 16:return d=t.sent,t.next=19,d.json();case 19:return f=t.sent,g=c+y(m.situationId)+"_rip/"+f.cardRes+"_normal.png",t.abrupt("return",[g,f.attr,Math.floor((f.characterId-1)/5)+1,f.title,m.situationId]);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){var e=Math.trunc(t/50).toString();return"0".repeat(5-e.length)+e}var k=function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).componentDidMount=function(){a.getGachaList(a.state.region)},a.handleRegion=function(t){a.handleReset(),a.setState({region:t.target.value}),a.getGachaList(t.target.value)},a.getGachaList=function(t){fetch("https://api.bandori.ga/v1/"+t+"/gacha").then((function(t){return t.json()})).then((function(e){var n=e.data.filter((function(t){return!(t.gachaName.includes("\u2605")||t.gachaName.includes("Type")||t.gachaName.includes("Step Up")||t.gachaName.includes("\u30bf\u30a4\u30d7")||t.paymentMethods.length<2)&&!(!t.details||!t)})).slice(0).reverse().map((function(e){for(var a,n=0,r=0,s=0,c=e.details.filter((function(t){return!0===t.pickup})),l=0;l<c.length;l++)2===c[l].rarityIndex?n++:3===c[l].rarityIndex?r++:s++;return a="jp"===t?e.gachaId.toString()+" - "+e.gachaName:e.gachaName,{value:e.gachaId,display:a,focus:[n,r,s]}}));a.setState({gachaList:n,selectedGacha:n[0].value,focusAmount:n[0].focus,gachaimg:"https://bestdori.com/assets/"+a.state.region+"/homebanner_rip/banner_gacha"+n[0].value+".png"})})).catch((function(t){console.log(t)}))},a.handleGacha=function(t){var e=parseInt(t.target.value.slice(6));a.setState({selectedGacha:e,focusAmount:[parseInt(t.target.value[0]),parseInt(t.target.value[2]),parseInt(t.target.value[4])],gachaimg:"https://bestdori.com/assets/"+a.state.region+"/homebanner_rip/banner_gacha"+e+".png"})},a.handleRoll=function(t){var e=Math.random(),n="";return e<=a.state.rate?(a.focusRoll(4,e)?a.getCard(4,!0):a.getCard(4),n="4",a.setState((function(t){return{four:t.four+1,total:t.total+1}}))):e>a.state.rate&&e<=a.state.rate+.085?(a.focusRoll(3,e)?a.getCard(3,!0):a.getCard(3),n="3",a.setState((function(t){return{three:t.three+1,total:t.total+1}}))):(a.focusRoll(2,e)?a.getCard(2,!0):a.getCard(2),n="2",a.setState((function(t){return{two:t.two+1,total:t.total+1}}))),9===a.state.total&&a.setState({tsugu:N.a}),100===a.state.total&&a.setState({whale:r.a.createElement("img",{src:p.a,width:"20px",height:"20px",alt:""})}),n},a.handleRollTen=function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.setState((function(t){return{q:[]}}));case 2:a.rollTen();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.rollTen=function(){for(var t="",e=0;e<9;e++)t=t+" "+a.handleRoll();if(t.includes("3")||t.includes("4"))t=a.handleRoll()+t;else{var n=Math.random();n<=a.state.rate?(a.focusRoll(4,n)?a.getCard(4,!0):a.getCard(4),a.setState((function(t){return{four:t.four+1,total:t.total+1}}))):(a.focusRoll(3,n,.13695)?a.getCard(3,!0):a.getCard(3),a.setState((function(t){return{three:t.three+1,total:t.total+1}})))}},a.focusRoll=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.012,r="focus"+t.toString();return e<=(4===t?.005*a.state.focusAmount[2]:3===t?(a.state.rate+n)*a.state.focusAmount[1]:(a.state.rate+.085+.096)*a.state.focusAmount[0])&&(a.setState((function(e){var a;return a=4===t?e.focus4:3===t?e.focus3:e.focus2,Object(l.a)({},r,a+1)})),!0)},a.handleDF=function(t){t.target.checked?a.setState((function(t){return{rate:.06}})):a.setState((function(t){return{rate:.03}}))},a.handleReset=function(t){var e=a.state.rate,n=a.state.gachaList,r=a.state.selectedGacha,s=a.state.focusAmount,c=a.state.region,l=a.state.gachaimg;a.setState((function(t){return a.initialState})),a.setState({q:[],gachaList:n,selectedGacha:r,focusAmount:s,region:c,gachaimg:l}),.06===e&&a.setState((function(t){return{rate:.06}}))},a.getCard=function(t,e){var n=a.state.q,s=r.a.createElement("div",null);s=4===t?r.a.createElement("div",null,r.a.createElement("div",{className:"thumb-rarity-0-1"}," "),r.a.createElement("div",{className:"thumb-rarity-0-2"}," "),r.a.createElement("div",{className:"thumb-rarity-0-3"}," "),r.a.createElement("div",{className:"thumb-rarity-0-4"}," ")):3===t?r.a.createElement("div",null,r.a.createElement("div",{className:"thumb-rarity-0-1"}," "),r.a.createElement("div",{className:"thumb-rarity-0-2"}," "),r.a.createElement("div",{className:"thumb-rarity-0-3"}," ")):2===t?r.a.createElement("div",null,r.a.createElement("div",{className:"thumb-rarity-0-1"}," "),r.a.createElement("div",{className:"thumb-rarity-0-2"}," ")):r.a.createElement("div",null),function(t){return w.apply(this,arguments)}(t,e,a.state.selectedGacha,a.state.region).then((function(e){10===n.length&&n.shift(),n.push(r.a.createElement("a",{href:"https://bestdori.com/info/cards/"+e[4],target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"thumb-parent",title:e[3]},r.a.createElement("img",{src:e[0],height:"100",width:"100",alt:""}),r.a.createElement("div",{className:"thumb-frame-"+t.toString()}," "),r.a.createElement("div",{className:"thumb-attr-"+e[1]}," "),r.a.createElement("div",{className:"thumb-band-"+e[2]}," "),s))),a.setState({q:n})}))},a.handleHoverIn=function(t){0!=a.state.total&&a.setState((function(t){return{two:t.two/t.total,three:t.three/t.total,four:t.four/t.total}}))},a.handleHoverOut=function(t){a.setState((function(t){return{two:t.two*t.total,three:t.three*t.total,four:t.four*t.total}}))},a.initialState={rate:.03,two:0,three:0,four:0,total:0,focus4:0,focus3:0,focus2:0,q:[],whale:"",tsugu:E.a,gachaList:[{display:"Loading Gacha List..."}],selectedGacha:5,focusAmount:[0,0,0],region:"en",gachaimg:""},a.state=a.initialState,a}return Object(g.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App "+this.state.dark},r.a.createElement("div",{className:"parent"},r.a.createElement("div",{class:"container stats"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-1"},r.a.createElement("img",{src:this.state.tsugu,alt:"",height:"75px"})),r.a.createElement("div",{class:"col-8 total"},r.a.createElement("div",null,"Total: ",this.state.total," (",this.state.focus2+this.state.focus3+this.state.focus4,")"),r.a.createElement("div",null,"Stars spent: ",250*this.state.total,"\xa0",this.state.whale)),r.a.createElement("div",{class:"individual",onMouseEnter:this.handleHoverIn,onMouseLeave:this.handleHoverOut},r.a.createElement("div",null,"4\u2606: ",Math.round(100*this.state.four)/100," (",this.state.focus4,")"),r.a.createElement("div",null,"3\u2606: ",Math.round(100*this.state.three)/100," (",this.state.focus3,")"),r.a.createElement("div",null,"2\u2606: ",Math.round(100*this.state.two)/100," (",this.state.focus2,")")))),r.a.createElement("div",{className:"results"},this.state.q),r.a.createElement("div",{class:"container gacha"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col gachabanner"},r.a.createElement("a",{href:"https://bestdori.com/info/gacha/"+this.state.selectedGacha,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:this.state.gachaimg,alt:"",height:"100px"}))),r.a.createElement("div",{class:"col gachaoptions"},"Gacha:",r.a.createElement("br",null),r.a.createElement("select",{className:"btn btn-sm gachalist",onChange:this.handleGacha},this.state.gachaList.map((function(t){return r.a.createElement("option",{key:t.value,value:[t.focus,t.value]},t.display)}))),r.a.createElement("br",null),"Server:",r.a.createElement("br",null),r.a.createElement("select",{className:"btn btn-sm gachalist",onChange:this.handleRegion},r.a.createElement("option",{value:"en"},"WW"),r.a.createElement("option",{value:"jp"},"JP"))))),r.a.createElement("div",{class:"controls"},r.a.createElement("div",{className:"custom-switch dreamfes"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"defaultUnchecked",onClick:this.handleDF}),r.a.createElement("label",{className:"custom-control-label unselectable",htmlFor:"defaultUnchecked"},"DreamFes")),r.a.createElement("button",{className:"btn rollbutton",onClick:this.handleRoll}," Roll "),r.a.createElement("button",{className:"btn rollbutton",onClick:this.handleRollTen}," Roll 10 "),r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleReset}," Reset "))))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.b80b4c35.chunk.js.map